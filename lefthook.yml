min_version: 1.9.0

output:
  - meta
  - success
  - failure
  - summary

pre-commit:
  parallel: true
  commands:
    format:
      glob: "*.go"
      run: gofmt -l -w {staged_files} && goimports -w {staged_files}
      stage_fixed: true
      fail_text: "Formatting failed"

    lint:
      glob: "*.go"
      run: golangci-lint run --config=".golangci.yaml" --new --timeout=2m {staged_files}
      fail_text: "Linting failed. Run: task lint:fix"

commit-msg:
  commands:
    conventional-commit:
      run: .lefthook/commit-msg-check.sh {1}
      fail_text: "Invalid commit message format"

pre-push:
  commands:
    check:
      run: task check
      fail_text: "Pre-push checks failed. Run: task check"
